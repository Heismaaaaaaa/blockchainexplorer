let createBundleSearch,bundleContainer;const dropdownBundleButton=document.getElementById("buttonMenuTopbarBundle"),dropdownBundleToggle=document.getElementById("dropdownMenuTopbarBundle");let dropdownBundleBootstapToggle=new bootstrap.Dropdown(dropdownBundleToggle);function initCreateBundle(){bundleContainer.defaultContainer()}function updateBundleName(e){let n=e.target;n.closest(".modal-body").querySelector("[data-bundle-name]").innerHTML=n.value||"&nbsp;"}function modalAddBundle(){let e=getBundle(),n=bundleContainer.getData();e.push(n),setCookie(cookiesBundle,JSON.stringify(e),365),refreshBundle(),$("#createBundleModal").modal("hide"),window.location.href=`/group?id=${n.id}&addresses=${n.address.join(", ")}&name=${n.name}`}function openCreateBundle(){initCreateBundle(),$("#createBundleModal").modal("show")}function refreshBundle(){let e=document.getElementById("bundleUnlist");const n=e.dataset.maxItems;let d=getBundle(),t="";d.forEach((function(e,n){t+=`\n            <li>\n                <a class='dropdown-item' href='/group?id=${e.id}&addresses=${e.address.join(",")}&name=${e.name}'>\n                    <div class='d-flex align-items-center gap-2'>\n                          <div class="bundle-image-js" data-id="${e.id}" data-bigimage="false"></div>\n                    <div>\n                        <div class="text-truncate" style="max-width: 10rem;">\n                        <span>${e.name}</span>\n                        </div>\n                        <div class="small text-muted text-truncate" style="max-width: 10rem;">\n                        <span>${e.address.length} ${e.address.length>1?"addresses":"address"}</span>\n                        </div>\n                    </div>\n                </div>\n\n                </a>\n            </li>\n            `})),e.innerHTML=t;let a=document.getElementById("bundleCreateJs");d.length>=n?a.innerHTML=`\n              <div class="dropdown-item d-flex align-items-center gap-2">\n                <i class="fa fa-plus"></i> Create Group (${d.length}/${n})\n              </div>`:a.innerHTML=`\n                <a class="dropdown-item d-flex align-items-center gap-2" role="button" onclick="openCreateBundle()">\n                  <i class="fa fa-plus"></i> Create Group (${d.length}/${n})\n                </a>`,genericImageErrorHandling()}dropdownBundleButton.addEventListener("click",(function(){getBundle().length>0?(dropdownBundleBootstapToggle.toggle(),dropdownBundleButton.classList.add("show")):openCreateBundle()})),document.addEventListener("click",(function(e){dropdownBundleToggle.contains(e.target)||dropdownBundleButton.contains(e.target)||(dropdownBundleBootstapToggle.hide(),dropdownBundleButton.classList.remove("show"))})),document.addEventListener("DOMContentLoaded",(function(e){refreshBundle(),createBundleSearch=etherSearchBundleInit({id:"createAddress",attributes:{name:"title",img:"img",rate:"rate",address:"address",group:"group",groupid:"groupid",is_verified:"is_checked",link:"link",website:"website",is_featured:"is_featured",reputation:"reputation",chain_id:"chainid",chain_name:"chain_name",chain_name_long:"chain_name_long",explorer_icon_light:"explorer_icon_light",explorer_icon_dark:"explorer_icon_dark",chain_icon:"chain_icon"}}),bundleContainer=bundleContainerInit({id:"createBundleModal",searchPanel:createBundleSearch})}));